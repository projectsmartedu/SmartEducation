{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\harsh\\\\Downloads\\\\finalpro\\\\frontend\\\\src\\\\pages\\\\StudentCourseDetail.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport DashboardLayout from '../components/Layout/DashboardLayout';\nimport { coursesAPI, progressAPI } from '../services/api';\nimport { ArrowLeft, BookOpen, Clock, CheckCircle, Circle, Loader2, FileText, Award, ChevronRight, X, File } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst STATUS_STYLES = {\n  'mastered': {\n    bg: 'bg-[#dcfce7]',\n    text: 'text-[#166534]',\n    label: 'Mastered'\n  },\n  'completed': {\n    bg: 'bg-[#dbeafe]',\n    text: 'text-[#1d4ed8]',\n    label: 'Completed'\n  },\n  'in-progress': {\n    bg: 'bg-[#fef9c3]',\n    text: 'text-[#92400e]',\n    label: 'In Progress'\n  },\n  'not-started': {\n    bg: 'bg-[#f1f5f9]',\n    text: 'text-[#64748b]',\n    label: 'Not Started'\n  }\n};\nconst StudentCourseDetail = () => {\n  _s();\n  const {\n    courseId\n  } = useParams();\n  const [course, setCourse] = useState(null);\n  const [topics, setTopics] = useState([]);\n  const [progressMap, setProgressMap] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [updating, setUpdating] = useState(null);\n\n  // Reading view state\n  const [readingTopic, setReadingTopic] = useState(null);\n  const [topicContent, setTopicContent] = useState(null);\n  const [contentLoading, setContentLoading] = useState(false);\n  const [completionSuccess, setCompletionSuccess] = useState(null);\n  const fetchData = useCallback(async () => {\n    try {\n      var _courseRes$data, _courseRes$data2, _progressRes$data;\n      const [courseRes, progressRes] = await Promise.all([coursesAPI.getById(courseId), progressAPI.getCourseProgress(courseId).catch(() => ({\n        data: {\n          progress: []\n        }\n      }))]);\n      setCourse(((_courseRes$data = courseRes.data) === null || _courseRes$data === void 0 ? void 0 : _courseRes$data.course) || null);\n      setTopics(((_courseRes$data2 = courseRes.data) === null || _courseRes$data2 === void 0 ? void 0 : _courseRes$data2.topics) || []);\n      const pMap = {};\n      const progressArr = ((_progressRes$data = progressRes.data) === null || _progressRes$data === void 0 ? void 0 : _progressRes$data.progress) || [];\n      if (Array.isArray(progressArr)) {\n        progressArr.forEach(p => {\n          var _p$topic;\n          const topicId = ((_p$topic = p.topic) === null || _p$topic === void 0 ? void 0 : _p$topic._id) || p.topic;\n          if (topicId) pMap[topicId] = p;\n        });\n      }\n      setProgressMap(pMap);\n    } catch {\n      setError('Failed to load course details.');\n    } finally {\n      setLoading(false);\n    }\n  }, [courseId]);\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n  const openTopicReader = async topic => {\n    setReadingTopic(topic);\n    setContentLoading(true);\n    setTopicContent(null);\n    try {\n      const res = await coursesAPI.getTopicContent(courseId, topic._id);\n      setTopicContent(res.data);\n    } catch {\n      setTopicContent({\n        error: 'Failed to load content'\n      });\n    } finally {\n      setContentLoading(false);\n    }\n  };\n  const closeReader = () => {\n    setReadingTopic(null);\n    setTopicContent(null);\n  };\n  const handleStartTopic = async topicId => {\n    setUpdating(topicId);\n    try {\n      await progressAPI.updateProgress(topicId, {\n        status: 'in-progress',\n        timeSpentMinutes: 0\n      });\n      await fetchData();\n    } catch {\n      setError('Failed to start topic.');\n    } finally {\n      setUpdating(null);\n    }\n  };\n  const handleCompleteTopic = async topic => {\n    setUpdating(topic._id);\n    try {\n      await progressAPI.updateProgress(topic._id, {\n        status: 'completed',\n        masteryLevel: 0.8,\n        timeSpentMinutes: topic.estimatedMinutes || 15\n      });\n      setCompletionSuccess(topic);\n      await fetchData();\n      setTimeout(() => setCompletionSuccess(null), 3000);\n    } catch {\n      setError('Failed to complete topic.');\n    } finally {\n      setUpdating(null);\n    }\n  };\n  const getProgress = topicId => progressMap[topicId] || null;\n  const sortedTopics = [...topics].sort((a, b) => a.order - b.order);\n\n  // Check if the previous topic is completed (for sequential unlock)\n  const isTopicUnlocked = index => {\n    if (index === 0) return true;\n    const prevTopic = sortedTopics[index - 1];\n    const prevProg = getProgress(prevTopic._id);\n    return (prevProg === null || prevProg === void 0 ? void 0 : prevProg.status) === 'completed' || (prevProg === null || prevProg === void 0 ? void 0 : prevProg.status) === 'mastered';\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center py-24\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-10 w-10 animate-spin rounded-full border-4 border-[#e2e8f0] border-t-[#4338ca]\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }, this);\n  }\n  const completedCount = topics.filter(t => {\n    const p = getProgress(t._id);\n    return (p === null || p === void 0 ? void 0 : p.status) === 'completed' || (p === null || p === void 0 ? void 0 : p.status) === 'mastered';\n  }).length;\n  const progressPercent = topics.length > 0 ? Math.round(completedCount / topics.length * 100) : 0;\n\n  // Reading view (full screen overlay)\n  if (readingTopic) {\n    var _topicContent$materia;\n    const prog = getProgress(readingTopic._id);\n    const isCompleted = (prog === null || prog === void 0 ? void 0 : prog.status) === 'completed' || (prog === null || prog === void 0 ? void 0 : prog.status) === 'mastered';\n    const isStarted = (prog === null || prog === void 0 ? void 0 : prog.status) === 'in-progress';\n    return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rounded-[28px] bg-white p-5 shadow-xl ring-1 ring-[#e2e8f0]\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: closeReader,\n                className: \"rounded-full p-2 hover:bg-[#f1f5f9] transition\",\n                children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n                  className: \"h-5 w-5 text-[#475569]\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs font-bold text-[#4338ca]\",\n                    children: [\"Topic #\", readingTopic.order]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 151,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                    className: \"text-lg font-semibold text-[#0f172a]\",\n                    children: readingTopic.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 152,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-3 mt-1 text-xs text-[#94a3b8]\",\n                  children: [(topicContent === null || topicContent === void 0 ? void 0 : topicContent.wordCount) && /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [topicContent.wordCount, \" words\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 155,\n                    columnNumber: 69\n                  }, this), (topicContent === null || topicContent === void 0 ? void 0 : topicContent.readingTime) && /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"~\", topicContent.readingTime, \" min read\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 71\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [readingTopic.pointsReward, \" XP\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 157,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 29\n            }, this), isCompleted ? /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"inline-flex items-center gap-1 rounded-full bg-[#dcfce7] px-4 py-2 text-sm font-semibold text-[#166534]\",\n              children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                className: \"h-4 w-4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 37\n              }, this), \" Completed\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleCompleteTopic(readingTopic),\n              disabled: updating === readingTopic._id,\n              className: \"inline-flex items-center gap-2 rounded-full bg-[#16a34a] px-5 py-2 text-sm font-semibold text-white shadow hover:bg-[#15803d] disabled:opacity-50 transition\",\n              children: updating === readingTopic._id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                  className: \"h-4 w-4 animate-spin\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 43\n                }, this), \" Completing...\"]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n                  className: \"h-4 w-4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 43\n                }, this), \" Mark as Complete (+\", readingTopic.pointsReward, \" XP)\"]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rounded-[28px] bg-white shadow-xl ring-1 ring-[#e2e8f0] overflow-hidden\",\n          children: contentLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col items-center justify-center py-24\",\n            children: [/*#__PURE__*/_jsxDEV(Loader2, {\n              className: \"h-10 w-10 animate-spin text-[#4338ca]\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-4 text-sm text-[#64748b]\",\n              children: \"Loading topic content...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 29\n          }, this) : topicContent !== null && topicContent !== void 0 && topicContent.error ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-12 text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-red-600\",\n              children: topicContent.error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 29\n          }, this) : !(topicContent !== null && topicContent !== void 0 && (_topicContent$materia = topicContent.material) !== null && _topicContent$materia !== void 0 && _topicContent$materia.content) ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col items-center justify-center py-24\",\n            children: [/*#__PURE__*/_jsxDEV(FileText, {\n              className: \"h-16 w-16 text-[#cbd5e1]\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"mt-4 text-lg font-semibold text-[#475569]\",\n              children: \"No Content Available\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-2 text-sm text-[#94a3b8]\",\n              children: \"The teacher hasn't uploaded material for this topic yet.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 33\n            }, this), !isCompleted && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleCompleteTopic(readingTopic),\n              disabled: updating === readingTopic._id,\n              className: \"mt-6 rounded-full bg-[#16a34a] px-6 py-2 text-sm font-semibold text-white hover:bg-[#15803d] disabled:opacity-50\",\n              children: updating === readingTopic._id ? 'Completing...' : `Mark Complete Anyway (+${readingTopic.pointsReward} XP)`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-8\",\n            children: [topicContent.material.type === 'pdf' && topicContent.material.originalFilename && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-6 flex items-center gap-3 rounded-2xl bg-[#f1f5f9] p-4\",\n              children: [/*#__PURE__*/_jsxDEV(File, {\n                className: \"h-8 w-8 text-[#4338ca]\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-medium text-[#0f172a]\",\n                  children: topicContent.material.originalFilename\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xs text-[#64748b]\",\n                  children: [topicContent.material.fileSize && `${(topicContent.material.fileSize / 1024).toFixed(0)} KB â€¢ `, topicContent.wordCount, \" words \\u2022 ~\", topicContent.readingTime, \" min read\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"prose prose-sm max-w-none\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"whitespace-pre-wrap text-[#1e293b] leading-relaxed text-[15px] font-[system-ui]\",\n                children: topicContent.material.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 33\n            }, this), !isCompleted && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-10 flex justify-center border-t border-[#e2e8f0] pt-8\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleCompleteTopic(readingTopic),\n                disabled: updating === readingTopic._id,\n                className: \"inline-flex items-center gap-2 rounded-full bg-[#16a34a] px-8 py-3 text-base font-semibold text-white shadow-lg hover:bg-[#15803d] disabled:opacity-50 transition transform hover:scale-105\",\n                children: updating === readingTopic._id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                    className: \"h-5 w-5 animate-spin\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 51\n                  }, this), \" Completing...\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Award, {\n                    className: \"h-5 w-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 51\n                  }, this), \" I've finished reading \\u2014 Complete Topic (+\", readingTopic.pointsReward, \" XP)\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }, this);\n  }\n\n  // Course overview (topic list)\n  return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [completionSuccess && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed top-4 right-4 z-50 animate-bounce rounded-2xl bg-[#16a34a] px-6 py-4 text-white shadow-2xl\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-2xl\",\n            children: \"\\uD83C\\uDF89\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"font-semibold\",\n              children: \"Topic Completed!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm opacity-90\",\n              children: [\"+\", completionSuccess.pointsReward, \" XP earned for \\\"\", completionSuccess.title, \"\\\"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"rounded-[28px] bg-gradient-to-br from-[#ede9fe] via-[#f0f9ff] to-[#fef9c3] p-6 shadow-xl\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/student/courses\",\n          className: \"inline-flex items-center gap-1 text-sm font-medium text-[#4338ca] hover:text-[#312e81] mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(ArrowLeft, {\n            className: \"h-4 w-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 25\n          }, this), \" Back to My Courses\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-semibold text-[#0f172a]\",\n          children: (course === null || course === void 0 ? void 0 : course.title) || 'Course'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-1 text-sm text-[#475569]\",\n          children: course === null || course === void 0 ? void 0 : course.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 flex flex-wrap gap-4 text-sm text-[#475569]\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"flex items-center gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 67\n            }, this), \" \", course === null || course === void 0 ? void 0 : course.subject]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"flex items-center gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(Clock, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 67\n            }, this), \" \", course === null || course === void 0 ? void 0 : course.estimatedHours, \"h estimated\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"flex items-center gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 67\n            }, this), \" \", completedCount, \"/\", topics.length, \" completed\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between text-xs text-[#475569] mb-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Progress\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-semibold\",\n              children: [progressPercent, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-3 rounded-full bg-white/60\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-3 rounded-full bg-gradient-to-r from-[#4338ca] to-[#0ea5e9] transition-all\",\n              style: {\n                width: `${progressPercent}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rounded-2xl bg-red-50 p-4 text-sm text-red-700\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"rounded-[28px] bg-white p-6 shadow-xl ring-1 ring-[#e2e8f0]\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold text-[#0f172a] mb-2\",\n          children: \"Course Topics\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-[#64748b] mb-6\",\n          children: \"Complete topics in order. Each topic earns you XP points.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 21\n        }, this), topics.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"py-8 text-center text-sm text-[#94a3b8]\",\n          children: \"No topics in this course yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: sortedTopics.map((topic, index) => {\n            var _topic$material;\n            const prog = getProgress(topic._id);\n            const status = (prog === null || prog === void 0 ? void 0 : prog.status) || 'not-started';\n            const style = STATUS_STYLES[status] || STATUS_STYLES['not-started'];\n            const isCompleted = status === 'completed' || status === 'mastered';\n            const unlocked = isTopicUnlocked(index);\n            const isUpdating = updating === topic._id;\n            const hasMaterial = !!topic.material;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `rounded-2xl border p-5 transition ${unlocked ? 'border-[#e2e8f0] bg-[#f8fafc] hover:shadow-md cursor-pointer' : 'border-[#e2e8f0] bg-[#f1f5f9] opacity-60 cursor-not-allowed'}`,\n              onClick: () => unlocked && openTopicReader(topic),\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-between\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: `flex h-10 w-10 items-center justify-center rounded-full ${isCompleted ? 'bg-[#dcfce7]' : status === 'in-progress' ? 'bg-[#fef9c3]' : unlocked ? 'bg-[#ede9fe]' : 'bg-[#e2e8f0]'}`,\n                    children: isCompleted ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n                      className: \"h-5 w-5 text-[#16a34a]\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 331,\n                      columnNumber: 57\n                    }, this) : status === 'in-progress' ? /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-lg\",\n                      children: \"\\uD83D\\uDCD6\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 333,\n                      columnNumber: 57\n                    }, this) : unlocked ? /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm font-bold text-[#4338ca]\",\n                      children: index + 1\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 335,\n                      columnNumber: 57\n                    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-lg\",\n                      children: \"\\uD83D\\uDD12\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 337,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 322,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center gap-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                        className: \"text-sm font-semibold text-[#0f172a]\",\n                        children: topic.title\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 344,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: `rounded-full px-2 py-0.5 text-xs font-medium ${style.bg} ${style.text}`,\n                        children: style.label\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 345,\n                        columnNumber: 57\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 343,\n                      columnNumber: 53\n                    }, this), topic.description && /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"mt-0.5 text-xs text-[#64748b] line-clamp-1\",\n                      children: topic.description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 349,\n                      columnNumber: 75\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mt-1 flex gap-3 text-xs text-[#94a3b8]\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"flex items-center gap-1\",\n                        children: [/*#__PURE__*/_jsxDEV(Clock, {\n                          className: \"h-3 w-3\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 352,\n                          columnNumber: 61\n                        }, this), \" \", topic.estimatedMinutes, \" min\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 351,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"flex items-center gap-1\",\n                        children: [/*#__PURE__*/_jsxDEV(Award, {\n                          className: \"h-3 w-3\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 355,\n                          columnNumber: 61\n                        }, this), \" \", topic.pointsReward, \" XP\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 354,\n                        columnNumber: 57\n                      }, this), hasMaterial && /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"flex items-center gap-1 text-[#4338ca]\",\n                        children: [/*#__PURE__*/_jsxDEV(FileText, {\n                          className: \"h-3 w-3\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 359,\n                          columnNumber: 65\n                        }, this), \" \", ((_topic$material = topic.material) === null || _topic$material === void 0 ? void 0 : _topic$material.type) === 'pdf' ? 'PDF' : 'Text']\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 358,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 350,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 342,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 320,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2\",\n                  onClick: e => e.stopPropagation(),\n                  children: isUpdating ? /*#__PURE__*/_jsxDEV(Loader2, {\n                    className: \"h-5 w-5 animate-spin text-[#4338ca]\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 369,\n                    columnNumber: 53\n                  }, this) : isCompleted ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-2xl\",\n                    children: \"\\u2705\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 371,\n                    columnNumber: 53\n                  }, this) : unlocked && status === 'not-started' ? /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => {\n                      handleStartTopic(topic._id);\n                      openTopicReader(topic);\n                    },\n                    className: \"rounded-full bg-[#4338ca] px-4 py-1.5 text-xs font-semibold text-white hover:bg-[#312e81] transition\",\n                    children: \"Start Learning\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 373,\n                    columnNumber: 53\n                  }, this) : unlocked && status === 'in-progress' ? /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => openTopicReader(topic),\n                    className: \"inline-flex items-center gap-1 rounded-full bg-[#f59e0b] px-4 py-1.5 text-xs font-semibold text-white hover:bg-[#d97706] transition\",\n                    children: [\"Continue \", /*#__PURE__*/_jsxDEV(ChevronRight, {\n                      className: \"h-3.5 w-3.5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 380,\n                      columnNumber: 66\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 378,\n                    columnNumber: 53\n                  }, this) : !unlocked ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-xs text-[#94a3b8]\",\n                    children: \"Complete previous topic\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 383,\n                    columnNumber: 53\n                  }, this) : null\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 41\n              }, this)\n            }, topic._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 37\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 25\n        }, this), completedCount === topics.length && topics.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-8 rounded-2xl bg-gradient-to-r from-[#dcfce7] via-[#fef9c3] to-[#ede9fe] p-6 text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-4xl\",\n            children: \"\\uD83C\\uDF93\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"mt-2 text-xl font-bold text-[#0f172a]\",\n            children: \"Course Completed!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mt-1 text-sm text-[#475569]\",\n            children: [\"Congratulations! You've completed all \", topics.length, \" topics in \", course === null || course === void 0 ? void 0 : course.title, \".\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 251,\n    columnNumber: 9\n  }, this);\n};\n_s(StudentCourseDetail, \"ZLWKJ9LWSnRk7+699O9UuQ9Y/0Q=\", false, function () {\n  return [useParams];\n});\n_c = StudentCourseDetail;\nexport default StudentCourseDetail;\nvar _c;\n$RefreshReg$(_c, \"StudentCourseDetail\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","Link","DashboardLayout","coursesAPI","progressAPI","ArrowLeft","BookOpen","Clock","CheckCircle","Circle","Loader2","FileText","Award","ChevronRight","X","File","jsxDEV","_jsxDEV","Fragment","_Fragment","STATUS_STYLES","bg","text","label","StudentCourseDetail","_s","courseId","course","setCourse","topics","setTopics","progressMap","setProgressMap","loading","setLoading","error","setError","updating","setUpdating","readingTopic","setReadingTopic","topicContent","setTopicContent","contentLoading","setContentLoading","completionSuccess","setCompletionSuccess","fetchData","_courseRes$data","_courseRes$data2","_progressRes$data","courseRes","progressRes","Promise","all","getById","getCourseProgress","catch","data","progress","pMap","progressArr","Array","isArray","forEach","p","_p$topic","topicId","topic","_id","openTopicReader","res","getTopicContent","closeReader","handleStartTopic","updateProgress","status","timeSpentMinutes","handleCompleteTopic","masteryLevel","estimatedMinutes","setTimeout","getProgress","sortedTopics","sort","a","b","order","isTopicUnlocked","index","prevTopic","prevProg","children","className","fileName","_jsxFileName","lineNumber","columnNumber","completedCount","filter","t","length","progressPercent","Math","round","_topicContent$materia","prog","isCompleted","isStarted","onClick","title","wordCount","readingTime","pointsReward","disabled","material","content","type","originalFilename","fileSize","toFixed","to","description","subject","estimatedHours","style","width","map","_topic$material","unlocked","isUpdating","hasMaterial","e","stopPropagation","_c","$RefreshReg$"],"sources":["C:/Users/harsh/Downloads/finalpro/frontend/src/pages/StudentCourseDetail.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport DashboardLayout from '../components/Layout/DashboardLayout';\r\nimport { coursesAPI, progressAPI } from '../services/api';\r\nimport { ArrowLeft, BookOpen, Clock, CheckCircle, Circle, Loader2, FileText, Award, ChevronRight, X, File } from 'lucide-react';\r\n\r\nconst STATUS_STYLES = {\r\n    'mastered': { bg: 'bg-[#dcfce7]', text: 'text-[#166534]', label: 'Mastered' },\r\n    'completed': { bg: 'bg-[#dbeafe]', text: 'text-[#1d4ed8]', label: 'Completed' },\r\n    'in-progress': { bg: 'bg-[#fef9c3]', text: 'text-[#92400e]', label: 'In Progress' },\r\n    'not-started': { bg: 'bg-[#f1f5f9]', text: 'text-[#64748b]', label: 'Not Started' }\r\n};\r\n\r\nconst StudentCourseDetail = () => {\r\n    const { courseId } = useParams();\r\n    const [course, setCourse] = useState(null);\r\n    const [topics, setTopics] = useState([]);\r\n    const [progressMap, setProgressMap] = useState({});\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const [updating, setUpdating] = useState(null);\r\n\r\n    // Reading view state\r\n    const [readingTopic, setReadingTopic] = useState(null);\r\n    const [topicContent, setTopicContent] = useState(null);\r\n    const [contentLoading, setContentLoading] = useState(false);\r\n    const [completionSuccess, setCompletionSuccess] = useState(null);\r\n\r\n    const fetchData = useCallback(async () => {\r\n        try {\r\n            const [courseRes, progressRes] = await Promise.all([\r\n                coursesAPI.getById(courseId),\r\n                progressAPI.getCourseProgress(courseId).catch(() => ({ data: { progress: [] } }))\r\n            ]);\r\n            setCourse(courseRes.data?.course || null);\r\n            setTopics(courseRes.data?.topics || []);\r\n\r\n            const pMap = {};\r\n            const progressArr = progressRes.data?.progress || [];\r\n            if (Array.isArray(progressArr)) {\r\n                progressArr.forEach(p => {\r\n                    const topicId = p.topic?._id || p.topic;\r\n                    if (topicId) pMap[topicId] = p;\r\n                });\r\n            }\r\n            setProgressMap(pMap);\r\n        } catch {\r\n            setError('Failed to load course details.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [courseId]);\r\n\r\n    useEffect(() => { fetchData(); }, [fetchData]);\r\n\r\n    const openTopicReader = async (topic) => {\r\n        setReadingTopic(topic);\r\n        setContentLoading(true);\r\n        setTopicContent(null);\r\n        try {\r\n            const res = await coursesAPI.getTopicContent(courseId, topic._id);\r\n            setTopicContent(res.data);\r\n        } catch {\r\n            setTopicContent({ error: 'Failed to load content' });\r\n        } finally {\r\n            setContentLoading(false);\r\n        }\r\n    };\r\n\r\n    const closeReader = () => {\r\n        setReadingTopic(null);\r\n        setTopicContent(null);\r\n    };\r\n\r\n    const handleStartTopic = async (topicId) => {\r\n        setUpdating(topicId);\r\n        try {\r\n            await progressAPI.updateProgress(topicId, { status: 'in-progress', timeSpentMinutes: 0 });\r\n            await fetchData();\r\n        } catch {\r\n            setError('Failed to start topic.');\r\n        } finally {\r\n            setUpdating(null);\r\n        }\r\n    };\r\n\r\n    const handleCompleteTopic = async (topic) => {\r\n        setUpdating(topic._id);\r\n        try {\r\n            await progressAPI.updateProgress(topic._id, {\r\n                status: 'completed',\r\n                masteryLevel: 0.8,\r\n                timeSpentMinutes: topic.estimatedMinutes || 15\r\n            });\r\n            setCompletionSuccess(topic);\r\n            await fetchData();\r\n            setTimeout(() => setCompletionSuccess(null), 3000);\r\n        } catch {\r\n            setError('Failed to complete topic.');\r\n        } finally {\r\n            setUpdating(null);\r\n        }\r\n    };\r\n\r\n    const getProgress = (topicId) => progressMap[topicId] || null;\r\n\r\n    const sortedTopics = [...topics].sort((a, b) => a.order - b.order);\r\n\r\n    // Check if the previous topic is completed (for sequential unlock)\r\n    const isTopicUnlocked = (index) => {\r\n        if (index === 0) return true;\r\n        const prevTopic = sortedTopics[index - 1];\r\n        const prevProg = getProgress(prevTopic._id);\r\n        return prevProg?.status === 'completed' || prevProg?.status === 'mastered';\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <DashboardLayout>\r\n                <div className=\"flex items-center justify-center py-24\">\r\n                    <div className=\"h-10 w-10 animate-spin rounded-full border-4 border-[#e2e8f0] border-t-[#4338ca]\" />\r\n                </div>\r\n            </DashboardLayout>\r\n        );\r\n    }\r\n\r\n    const completedCount = topics.filter(t => {\r\n        const p = getProgress(t._id);\r\n        return p?.status === 'completed' || p?.status === 'mastered';\r\n    }).length;\r\n    const progressPercent = topics.length > 0 ? Math.round((completedCount / topics.length) * 100) : 0;\r\n\r\n    // Reading view (full screen overlay)\r\n    if (readingTopic) {\r\n        const prog = getProgress(readingTopic._id);\r\n        const isCompleted = prog?.status === 'completed' || prog?.status === 'mastered';\r\n        const isStarted = prog?.status === 'in-progress';\r\n\r\n        return (\r\n            <DashboardLayout>\r\n                <div className=\"space-y-4\">\r\n                    {/* Reader Header */}\r\n                    <div className=\"rounded-[28px] bg-white p-5 shadow-xl ring-1 ring-[#e2e8f0]\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <button onClick={closeReader} className=\"rounded-full p-2 hover:bg-[#f1f5f9] transition\">\r\n                                    <ArrowLeft className=\"h-5 w-5 text-[#475569]\" />\r\n                                </button>\r\n                                <div>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <span className=\"text-xs font-bold text-[#4338ca]\">Topic #{readingTopic.order}</span>\r\n                                        <h1 className=\"text-lg font-semibold text-[#0f172a]\">{readingTopic.title}</h1>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-3 mt-1 text-xs text-[#94a3b8]\">\r\n                                        {topicContent?.wordCount && <span>{topicContent.wordCount} words</span>}\r\n                                        {topicContent?.readingTime && <span>~{topicContent.readingTime} min read</span>}\r\n                                        <span>{readingTopic.pointsReward} XP</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            {isCompleted ? (\r\n                                <span className=\"inline-flex items-center gap-1 rounded-full bg-[#dcfce7] px-4 py-2 text-sm font-semibold text-[#166534]\">\r\n                                    <CheckCircle className=\"h-4 w-4\" /> Completed\r\n                                </span>\r\n                            ) : (\r\n                                <button\r\n                                    onClick={() => handleCompleteTopic(readingTopic)}\r\n                                    disabled={updating === readingTopic._id}\r\n                                    className=\"inline-flex items-center gap-2 rounded-full bg-[#16a34a] px-5 py-2 text-sm font-semibold text-white shadow hover:bg-[#15803d] disabled:opacity-50 transition\">\r\n                                    {updating === readingTopic._id ? (\r\n                                        <><Loader2 className=\"h-4 w-4 animate-spin\" /> Completing...</>\r\n                                    ) : (\r\n                                        <><CheckCircle className=\"h-4 w-4\" /> Mark as Complete (+{readingTopic.pointsReward} XP)</>\r\n                                    )}\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Content Area */}\r\n                    <div className=\"rounded-[28px] bg-white shadow-xl ring-1 ring-[#e2e8f0] overflow-hidden\">\r\n                        {contentLoading ? (\r\n                            <div className=\"flex flex-col items-center justify-center py-24\">\r\n                                <Loader2 className=\"h-10 w-10 animate-spin text-[#4338ca]\" />\r\n                                <p className=\"mt-4 text-sm text-[#64748b]\">Loading topic content...</p>\r\n                            </div>\r\n                        ) : topicContent?.error ? (\r\n                            <div className=\"p-12 text-center\">\r\n                                <p className=\"text-sm text-red-600\">{topicContent.error}</p>\r\n                            </div>\r\n                        ) : !topicContent?.material?.content ? (\r\n                            <div className=\"flex flex-col items-center justify-center py-24\">\r\n                                <FileText className=\"h-16 w-16 text-[#cbd5e1]\" />\r\n                                <h3 className=\"mt-4 text-lg font-semibold text-[#475569]\">No Content Available</h3>\r\n                                <p className=\"mt-2 text-sm text-[#94a3b8]\">The teacher hasn't uploaded material for this topic yet.</p>\r\n                                {!isCompleted && (\r\n                                    <button onClick={() => handleCompleteTopic(readingTopic)}\r\n                                        disabled={updating === readingTopic._id}\r\n                                        className=\"mt-6 rounded-full bg-[#16a34a] px-6 py-2 text-sm font-semibold text-white hover:bg-[#15803d] disabled:opacity-50\">\r\n                                        {updating === readingTopic._id ? 'Completing...' : `Mark Complete Anyway (+${readingTopic.pointsReward} XP)`}\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"p-8\">\r\n                                {/* Material header */}\r\n                                {topicContent.material.type === 'pdf' && topicContent.material.originalFilename && (\r\n                                    <div className=\"mb-6 flex items-center gap-3 rounded-2xl bg-[#f1f5f9] p-4\">\r\n                                        <File className=\"h-8 w-8 text-[#4338ca]\" />\r\n                                        <div>\r\n                                            <p className=\"text-sm font-medium text-[#0f172a]\">{topicContent.material.originalFilename}</p>\r\n                                            <p className=\"text-xs text-[#64748b]\">\r\n                                                {topicContent.material.fileSize && `${(topicContent.material.fileSize / 1024).toFixed(0)} KB â€¢ `}\r\n                                                {topicContent.wordCount} words â€¢ ~{topicContent.readingTime} min read\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n\r\n                                {/* Main content */}\r\n                                <div className=\"prose prose-sm max-w-none\">\r\n                                    <div className=\"whitespace-pre-wrap text-[#1e293b] leading-relaxed text-[15px] font-[system-ui]\">\r\n                                        {topicContent.material.content}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Bottom completion button */}\r\n                                {!isCompleted && (\r\n                                    <div className=\"mt-10 flex justify-center border-t border-[#e2e8f0] pt-8\">\r\n                                        <button onClick={() => handleCompleteTopic(readingTopic)}\r\n                                            disabled={updating === readingTopic._id}\r\n                                            className=\"inline-flex items-center gap-2 rounded-full bg-[#16a34a] px-8 py-3 text-base font-semibold text-white shadow-lg hover:bg-[#15803d] disabled:opacity-50 transition transform hover:scale-105\">\r\n                                            {updating === readingTopic._id ? (\r\n                                                <><Loader2 className=\"h-5 w-5 animate-spin\" /> Completing...</>\r\n                                            ) : (\r\n                                                <><Award className=\"h-5 w-5\" /> I've finished reading â€” Complete Topic (+{readingTopic.pointsReward} XP)</>\r\n                                            )}\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </DashboardLayout>\r\n        );\r\n    }\r\n\r\n    // Course overview (topic list)\r\n    return (\r\n        <DashboardLayout>\r\n            <div className=\"space-y-6\">\r\n                {/* Completion success toast */}\r\n                {completionSuccess && (\r\n                    <div className=\"fixed top-4 right-4 z-50 animate-bounce rounded-2xl bg-[#16a34a] px-6 py-4 text-white shadow-2xl\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <span className=\"text-2xl\">ðŸŽ‰</span>\r\n                            <div>\r\n                                <p className=\"font-semibold\">Topic Completed!</p>\r\n                                <p className=\"text-sm opacity-90\">+{completionSuccess.pointsReward} XP earned for \"{completionSuccess.title}\"</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Course Header */}\r\n                <section className=\"rounded-[28px] bg-gradient-to-br from-[#ede9fe] via-[#f0f9ff] to-[#fef9c3] p-6 shadow-xl\">\r\n                    <Link to=\"/student/courses\" className=\"inline-flex items-center gap-1 text-sm font-medium text-[#4338ca] hover:text-[#312e81] mb-4\">\r\n                        <ArrowLeft className=\"h-4 w-4\" /> Back to My Courses\r\n                    </Link>\r\n                    <h1 className=\"text-2xl font-semibold text-[#0f172a]\">{course?.title || 'Course'}</h1>\r\n                    <p className=\"mt-1 text-sm text-[#475569]\">{course?.description}</p>\r\n                    <div className=\"mt-4 flex flex-wrap gap-4 text-sm text-[#475569]\">\r\n                        <span className=\"flex items-center gap-1\"><BookOpen className=\"h-4 w-4\" /> {course?.subject}</span>\r\n                        <span className=\"flex items-center gap-1\"><Clock className=\"h-4 w-4\" /> {course?.estimatedHours}h estimated</span>\r\n                        <span className=\"flex items-center gap-1\"><CheckCircle className=\"h-4 w-4\" /> {completedCount}/{topics.length} completed</span>\r\n                    </div>\r\n                    {/* Progress bar */}\r\n                    <div className=\"mt-4\">\r\n                        <div className=\"flex justify-between text-xs text-[#475569] mb-1\">\r\n                            <span>Progress</span>\r\n                            <span className=\"font-semibold\">{progressPercent}%</span>\r\n                        </div>\r\n                        <div className=\"h-3 rounded-full bg-white/60\">\r\n                            <div className=\"h-3 rounded-full bg-gradient-to-r from-[#4338ca] to-[#0ea5e9] transition-all\"\r\n                                style={{ width: `${progressPercent}%` }} />\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                {error && <div className=\"rounded-2xl bg-red-50 p-4 text-sm text-red-700\">{error}</div>}\r\n\r\n                {/* Topics list - sequential learning path */}\r\n                <section className=\"rounded-[28px] bg-white p-6 shadow-xl ring-1 ring-[#e2e8f0]\">\r\n                    <h2 className=\"text-lg font-semibold text-[#0f172a] mb-2\">Course Topics</h2>\r\n                    <p className=\"text-sm text-[#64748b] mb-6\">Complete topics in order. Each topic earns you XP points.</p>\r\n\r\n                    {topics.length === 0 ? (\r\n                        <p className=\"py-8 text-center text-sm text-[#94a3b8]\">No topics in this course yet.</p>\r\n                    ) : (\r\n                        <div className=\"space-y-3\">\r\n                            {sortedTopics.map((topic, index) => {\r\n                                const prog = getProgress(topic._id);\r\n                                const status = prog?.status || 'not-started';\r\n                                const style = STATUS_STYLES[status] || STATUS_STYLES['not-started'];\r\n                                const isCompleted = status === 'completed' || status === 'mastered';\r\n                                const unlocked = isTopicUnlocked(index);\r\n                                const isUpdating = updating === topic._id;\r\n                                const hasMaterial = !!topic.material;\r\n\r\n                                return (\r\n                                    <div key={topic._id}\r\n                                        className={`rounded-2xl border p-5 transition ${unlocked\r\n                                            ? 'border-[#e2e8f0] bg-[#f8fafc] hover:shadow-md cursor-pointer'\r\n                                            : 'border-[#e2e8f0] bg-[#f1f5f9] opacity-60 cursor-not-allowed'\r\n                                        }`}\r\n                                        onClick={() => unlocked && openTopicReader(topic)}\r\n                                    >\r\n                                        <div className=\"flex items-center justify-between\">\r\n                                            <div className=\"flex items-center gap-4\">\r\n                                                {/* Status icon */}\r\n                                                <div className={`flex h-10 w-10 items-center justify-center rounded-full ${isCompleted\r\n                                                    ? 'bg-[#dcfce7]'\r\n                                                    : status === 'in-progress'\r\n                                                        ? 'bg-[#fef9c3]'\r\n                                                        : unlocked\r\n                                                            ? 'bg-[#ede9fe]'\r\n                                                            : 'bg-[#e2e8f0]'\r\n                                                }`}>\r\n                                                    {isCompleted ? (\r\n                                                        <CheckCircle className=\"h-5 w-5 text-[#16a34a]\" />\r\n                                                    ) : status === 'in-progress' ? (\r\n                                                        <span className=\"text-lg\">ðŸ“–</span>\r\n                                                    ) : unlocked ? (\r\n                                                        <span className=\"text-sm font-bold text-[#4338ca]\">{index + 1}</span>\r\n                                                    ) : (\r\n                                                        <span className=\"text-lg\">ðŸ”’</span>\r\n                                                    )}\r\n                                                </div>\r\n\r\n                                                {/* Topic info */}\r\n                                                <div>\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <h3 className=\"text-sm font-semibold text-[#0f172a]\">{topic.title}</h3>\r\n                                                        <span className={`rounded-full px-2 py-0.5 text-xs font-medium ${style.bg} ${style.text}`}>\r\n                                                            {style.label}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                    {topic.description && <p className=\"mt-0.5 text-xs text-[#64748b] line-clamp-1\">{topic.description}</p>}\r\n                                                    <div className=\"mt-1 flex gap-3 text-xs text-[#94a3b8]\">\r\n                                                        <span className=\"flex items-center gap-1\">\r\n                                                            <Clock className=\"h-3 w-3\" /> {topic.estimatedMinutes} min\r\n                                                        </span>\r\n                                                        <span className=\"flex items-center gap-1\">\r\n                                                            <Award className=\"h-3 w-3\" /> {topic.pointsReward} XP\r\n                                                        </span>\r\n                                                        {hasMaterial && (\r\n                                                            <span className=\"flex items-center gap-1 text-[#4338ca]\">\r\n                                                                <FileText className=\"h-3 w-3\" /> {topic.material?.type === 'pdf' ? 'PDF' : 'Text'}\r\n                                                            </span>\r\n                                                        )}\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            {/* Right side - action */}\r\n                                            <div className=\"flex items-center gap-2\" onClick={e => e.stopPropagation()}>\r\n                                                {isUpdating ? (\r\n                                                    <Loader2 className=\"h-5 w-5 animate-spin text-[#4338ca]\" />\r\n                                                ) : isCompleted ? (\r\n                                                    <span className=\"text-2xl\">âœ…</span>\r\n                                                ) : unlocked && status === 'not-started' ? (\r\n                                                    <button onClick={() => { handleStartTopic(topic._id); openTopicReader(topic); }}\r\n                                                        className=\"rounded-full bg-[#4338ca] px-4 py-1.5 text-xs font-semibold text-white hover:bg-[#312e81] transition\">\r\n                                                        Start Learning\r\n                                                    </button>\r\n                                                ) : unlocked && status === 'in-progress' ? (\r\n                                                    <button onClick={() => openTopicReader(topic)}\r\n                                                        className=\"inline-flex items-center gap-1 rounded-full bg-[#f59e0b] px-4 py-1.5 text-xs font-semibold text-white hover:bg-[#d97706] transition\">\r\n                                                        Continue <ChevronRight className=\"h-3.5 w-3.5\" />\r\n                                                    </button>\r\n                                                ) : !unlocked ? (\r\n                                                    <span className=\"text-xs text-[#94a3b8]\">Complete previous topic</span>\r\n                                                ) : null}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Course completion message */}\r\n                    {completedCount === topics.length && topics.length > 0 && (\r\n                        <div className=\"mt-8 rounded-2xl bg-gradient-to-r from-[#dcfce7] via-[#fef9c3] to-[#ede9fe] p-6 text-center\">\r\n                            <span className=\"text-4xl\">ðŸŽ“</span>\r\n                            <h3 className=\"mt-2 text-xl font-bold text-[#0f172a]\">Course Completed!</h3>\r\n                            <p className=\"mt-1 text-sm text-[#475569]\">\r\n                                Congratulations! You've completed all {topics.length} topics in {course?.title}.\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n                </section>\r\n            </div>\r\n        </DashboardLayout>\r\n    );\r\n};\r\n\r\nexport default StudentCourseDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}